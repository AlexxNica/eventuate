#!/bin/sh

DB_REPLICA_MAIN=com.rbmhtechnology.example.dbreplica.DBReplica
DB_REPLICA_LOCATION=$1

while [[ $# > 1 ]]; do
    key="$1"
    case $key in
        -j|--java)
        DB_REPLICA_MAIN=com.rbmhtechnology.example.japi.dbreplica.DBReplica
        DB_REPLICA_LOCATION=$2
        ;;
        *)
        # unknown option
        ;;
    esac
    shift # past argument or value
done

# try to generate the classpath script
# although it will be usually generated by './example' already
if [[ ! -f ./example/.example-classpath ]]; then
    sbt exampleClasspath || exit 1
fi

source ./example/.example-classpath

exec java -cp "$EXAMPLE_CLASSPATH" $DB_REPLICA_MAIN $DB_REPLICA_LOCATION
